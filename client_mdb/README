ServerUsage-Client-MDB - README
================================================================================

Name: ServerUsage-Client-MDB

Version: 6.2.0

Release date: 2012-08-21

Author: Nicola Asuni (nicola@fubra.com)

Copyright (2012-2012):
	Fubra Limited
	Manor Coach House
	Church Hill
	Aldershot
	Hampshire
	GU12 4RQ
	UK
	http://www.fubra.com
	support@fubra.com

URL: https://github.com/fubralimited/ServerUsage


SOFTWARE LICENSE (AGPLv3):
--------------------------

This program is free software: you can redistribute it and/or modify it under
the terms of the GNU Affero General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option) any
later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License along
with this program.  If not, see <http://www.gnu.org/licenses/>.

See LICENSE.TXT file for more information.


DESCRIPTION:
------------

The ServerUsage-Client-MDB is a program to collect usage statistic from a
MariaDB Database running on a GNU-Linux Operating System.

The ServerUsage-Client-MDB program is composed by two main sections: the
serverusage_client_mdb.bin to collect usage statistics from the database and the
serverusage_tcpsender_mdb.bin to send the output to a log server via TCP.

To collect and process data generated by this program check the
ServerUsage-Server project.

This folder contains the source code of ServerUsage-Client:

* makefile

	This is the makefile to create and install executable binaries.

* README

	This is the file you are currently reading.

* serverusage_client_mdb

	SysV Init script to execute ServerUsage-Client-MDB.

* serverusage_client_mdb.8

	Manpage for ServerUsage-Client-MDB.

* serverusage_client_mdb.spec

	SPEC file for RPM packaging.

* serverusage_client_mdb.conf

	Configuration file.

* serverusage_client_mdb.conf

	Configuration file.

* serverusage_client_mdb.c

	This program gets the users' usage statistics from MariaDB database and send them to ServerUsage-Server.

	This program in invoked using the following syntax:

	/usr/bin/serverusage_client_mdb.bin LOGSERVER_IP LOGSERVER_PORT DATABASE_HOST DATABASE_PORT DATABASE_USER DATABASE_PASSWORD SAMPLING_TIME SERVER_ID PATH_TCPSENDER PATH_TEMPLOG
	/usr/bin/serverusage_client_mdb.bin 127.0.0.1 9930 localhost 3306 "root" "PASSWORD" 60 "host001" "/usr/bin/serverusage_tcpsender_mdb.bin" "/var/log/serverusage_cache.log"

	Check the serverusage_client_mdb.conf configuration file for the meaning of the parameters.


REQUIRED PACKAGES TO COMPILE THE SOURCES:
-----------------------------------------

	The following packages are required to compile the sources:

		* install general development packages for C
		* MariaDB-devel

	Check on internet for the correct modules for your OS and kernel version.

	### Instructions for CentOS and Scientific Linux:

	yum groupinstall 'Development Tools'
	yum install kernel-devel elfutils-devel

	yum install MariaDB-devel crash-devel rpm-devel nss-devel avahi-devel latex2html xmlto xmlto-tex publican publican-fedora gtkmm24-devel libglademm24-devel boost-devel


COMPILE AND INSTALL
-------------------

	Once the required packages are installed, copy/extract the files in this
	folder to a folder in your home directory and cd into it.

	Now execute the following commands to compile and install:

		cp -u ../client/serverusage_tcpsender.c ./
		make
		make install


CONFIGURE
---------

	To configure ServerUsage-Client-MDB (The MariaDB module of ServerUsage-Client) edit the /etc/serverusage_client_mdb.conf
	configuration file.


RUN
---

	To start the ServerUsage-Client-MDB module you can use the SysV init script:

	/etc/init.d/serverusage_client_mdb

	To startup the service at boot you can use the chkconfig:
		chkconfig serverusage_client_mdb on
	or update-rc.d command (depending by OS type).


NOTES ON DATA
-------------

	- the process name field is always set to "mysql";
	- the user ID (UID) is alway set to "0";
	- the IP field contains the database user name;
	- the CPU ticks are obtained by multiplying the CPU time for the ticks per second constant and truncating this value to an integer (so it is always approximated by defect);
	- the I/O read value contains the bytes sent from database to the user;
	- the I/O write value contains the bytes received by database from the user;
	- the network in value is always set to zero;
	- the network out value is always set to zero.
	
================================================================================
